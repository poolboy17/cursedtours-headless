# Cursed Tours - Headless WordPress

Next.js frontend for [cursedtours.com](https://cursedtours.com) using WordPress as a headless CMS.

## Architecture

| Component | URL | Purpose |
|-----------|-----|---------|
| Frontend | https://cursedtours.com | Next.js on Vercel |
| WordPress Backend | https://wp.cursedtours.com | Content management |
| GraphQL Endpoint | https://wp.cursedtours.com/graphql | Data API |

## Tech Stack

- **Frontend**: Next.js 15, React 19, TypeScript
- **Styling**: Tailwind CSS, SASS
- **CMS**: WordPress with FaustWP
- **Theme**: Ncmaz (headless theme)
- **Deployment**: Vercel (auto-deploy from main branch)

## Sitemaps

Sitemaps are served directly from WordPress (industry standard for headless WP):

| What | URL |
|------|-----|
| robots.txt | https://cursedtours.com/robots.txt |
| Sitemap Index | https://wp.cursedtours.com/sitemap_index.xml |
| Post Sitemap | https://wp.cursedtours.com/post-sitemap1.xml |
| Category Sitemap | https://wp.cursedtours.com/category-sitemap1.xml |

The `robots.txt` (generated by `next-sitemap`) points to WordPress's sitemap index.
WordPress sitemaps contain the correct `cursedtours.com` URLs for all content.

**Configuration**: `next-sitemap.config.js`

## ISR (Incremental Static Regeneration)

- Posts and categories use on-demand ISR
- 10 most recent posts pre-generated at build
- Cache warming via GitHub Actions (manual/weekly)

## Development

```bash
# Install dependencies
npm install

# Generate GraphQL types
npm run generate

# Start dev server
npm run dev

# Build for production
npm run build
```

## Environment Variables

Required in Vercel:
- `NEXT_PUBLIC_WORDPRESS_URL` - WordPress GraphQL endpoint
- `FAUST_SECRET_KEY` - FaustWP authentication

## Key Files

```
src/
├── pages/
│   ├── api/
│   │   └── faust/           # FaustWP handlers
│   ├── [...wordpressNode].tsx  # Dynamic routing
│   └── preview.tsx             # Preview mode
├── components/
│   └── MyImage.tsx             # Optimized image component
└── wp-templates/               # WordPress template components

next-sitemap.config.js          # Robots.txt + sitemap configuration
```

## Deployment

Push to `main` branch triggers automatic Vercel deployment.

## Last Updated
2025-12-16
